
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>hydpy.core.propertytools &#8212; HydPy 4.0a11 documentation</title>
    <link rel="stylesheet" href="../../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../_static/language_data.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">HydPy 4.0a11 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" accesskey="U">Module code</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for hydpy.core.propertytools</h1><div class="highlight"><pre>
<span></span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="sd">&quot;&quot;&quot;This module implements |property| like classes with similar or</span>
<span class="sd">additional behaviour.&quot;&quot;&quot;</span>

<span class="c1"># import...</span>
<span class="c1"># ...from standard-library</span>
<span class="kn">import</span> <span class="nn">abc</span>
<span class="kn">import</span> <span class="nn">inspect</span>
<span class="kn">import</span> <span class="nn">types</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="k">import</span> <span class="o">*</span>
<span class="c1"># ...from HydPy</span>
<span class="kn">from</span> <span class="nn">hydpy.core</span> <span class="k">import</span> <span class="n">exceptiontools</span>
<span class="kn">from</span> <span class="nn">hydpy.core</span> <span class="k">import</span> <span class="n">objecttools</span>


<div class="viewcode-block" id="fgetdummy"><a class="viewcode-back" href="../../../propertytools.html#hydpy.auxs.anntools.fgetdummy">[docs]</a><span class="k">def</span> <span class="nf">fgetdummy</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;The &quot;unready&quot; default `fget` function of class |BaseProperty| objects.</span>

<span class="sd">    If any, only framework developers should ever encounter the following</span>
<span class="sd">    error when implementing new costum properties:</span>

<span class="sd">    &gt;&gt;&gt; from hydpy.core.propertytools import fgetdummy</span>
<span class="sd">    &gt;&gt;&gt; fgetdummy(&#39;arg1&#39;)</span>
<span class="sd">    Traceback (most recent call last):</span>
<span class="sd">    ...</span>
<span class="sd">    NotImplementedError: The &quot;unready&quot; default `fget` function `fgetdummy` \</span>
<span class="sd">should never been called, but has been called with argument(s): arg1.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
        <span class="n">f</span><span class="s1">&#39;The &quot;unready&quot; default `fget` function `fgetdummy` should &#39;</span>
        <span class="n">f</span><span class="s1">&#39;never been called, but has been called with argument(s): &#39;</span>
        <span class="n">f</span><span class="s1">&#39;{objecttools.enumeration(args)}.&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="fsetdummy"><a class="viewcode-back" href="../../../propertytools.html#hydpy.auxs.anntools.fsetdummy">[docs]</a><span class="k">def</span> <span class="nf">fsetdummy</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;The &quot;unready&quot; default `fget` function of class |BaseProperty| objects.</span>

<span class="sd">    If any, only framework developers should ever encounter the following</span>
<span class="sd">    error when implementing new costum properties:</span>

<span class="sd">    &gt;&gt;&gt; from hydpy.core.propertytools import fsetdummy</span>
<span class="sd">    &gt;&gt;&gt; fsetdummy(&#39;arg1&#39;, &#39;arg2&#39;)</span>
<span class="sd">    Traceback (most recent call last):</span>
<span class="sd">    ...</span>
<span class="sd">    NotImplementedError: The &quot;unready&quot; default `fset` function `fsetdummy` \</span>
<span class="sd">should never been called, but has been called with argument(s): arg1 and arg2.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
        <span class="n">f</span><span class="s1">&#39;The &quot;unready&quot; default `fset` function `fsetdummy` should &#39;</span>
        <span class="n">f</span><span class="s1">&#39;never been called, but has been called with argument(s): &#39;</span>
        <span class="n">f</span><span class="s1">&#39;{objecttools.enumeration(args)}.&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="fdeldummy"><a class="viewcode-back" href="../../../propertytools.html#hydpy.auxs.anntools.fdeldummy">[docs]</a><span class="k">def</span> <span class="nf">fdeldummy</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;The &quot;unready&quot; default `fget` function of class |BaseProperty| objects.</span>

<span class="sd">    If any, only framework developers should ever encounter the following</span>
<span class="sd">    error when implementing new costum properties:</span>

<span class="sd">    &gt;&gt;&gt; from hydpy.core.propertytools import fdeldummy</span>
<span class="sd">    &gt;&gt;&gt; fdeldummy(&#39;arg1&#39;)</span>
<span class="sd">    Traceback (most recent call last):</span>
<span class="sd">    ...</span>
<span class="sd">    NotImplementedError: The &quot;unready&quot; default `fdel` function `fdeldummy` \</span>
<span class="sd">should never been called, but has been called with argument(s): arg1.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
        <span class="n">f</span><span class="s1">&#39;The &quot;unready&quot; default `fdel` function `fdeldummy` should &#39;</span>
        <span class="n">f</span><span class="s1">&#39;never been called, but has been called with argument(s): &#39;</span>
        <span class="n">f</span><span class="s1">&#39;{objecttools.enumeration(args)}.&#39;</span><span class="p">)</span></div>


<div class="viewcode-block" id="BaseProperty"><a class="viewcode-back" href="../../../propertytools.html#hydpy.auxs.anntools.BaseProperty">[docs]</a><span class="k">class</span> <span class="nc">BaseProperty</span><span class="p">(</span><span class="n">abc</span><span class="o">.</span><span class="n">ABC</span><span class="p">):</span>
    <span class="c1"># noinspection PyUnresolvedReferences</span>
    <span class="sd">&quot;&quot;&quot;Abstract base class for deriving classes similar to |property|.</span>

<span class="sd">    |BaseProperty| provides the abstract methods |BaseProperty.call_fget|,</span>
<span class="sd">    |BaseProperty.call_fset|, and |BaseProperty.call_fdel|, which allow</span>
<span class="sd">    to add custom functionalities (e.g. caching) besides the standard</span>
<span class="sd">    functionalities of properties:</span>

<span class="sd">    &gt;&gt;&gt; from hydpy.core.propertytools import BaseProperty</span>
<span class="sd">    &gt;&gt;&gt; BaseProperty()</span>
<span class="sd">    Traceback (most recent call last):</span>
<span class="sd">    ...</span>
<span class="sd">    TypeError: Can&#39;t instantiate abstract class BaseProperty with abstract \</span>
<span class="sd">methods call_fdel, call_fget, call_fset</span>

<span class="sd">    The following concrete class mimics the behaviour of class |property|:</span>

<span class="sd">    &gt;&gt;&gt; from hydpy.core.propertytools import fgetdummy, fsetdummy, fdeldummy</span>
<span class="sd">    &gt;&gt;&gt; class ConcreteProperty(BaseProperty):</span>
<span class="sd">    ...</span>
<span class="sd">    ...     def __init__(self, fget=fgetdummy):</span>
<span class="sd">    ...         self.fget = fget</span>
<span class="sd">    ...         self.__doc__ = fget.__doc__</span>
<span class="sd">    ...         self.fset = fsetdummy</span>
<span class="sd">    ...         self.fdel = fdeldummy</span>
<span class="sd">    ...</span>
<span class="sd">    ...     def call_fget(self, obj):</span>
<span class="sd">    ...         return self.fget(obj)</span>
<span class="sd">    ...     def call_fset(self, obj, value):</span>
<span class="sd">    ...         self.fset(obj, value)</span>
<span class="sd">    ...     def call_fdel(self, obj):</span>
<span class="sd">    ...         self.fdel(obj)</span>

<span class="sd">    The following owner class implements its attribute `x` by defining</span>
<span class="sd">    all three &quot;property methods&quot; (`getter`/`fget`, `setter`/`fset`,</span>
<span class="sd">    `deleter`/`fdel`), but its attribute `y` by defining none of them:</span>

<span class="sd">    &gt;&gt;&gt; class Owner:</span>
<span class="sd">    ...</span>
<span class="sd">    ...     def __init__(self):</span>
<span class="sd">    ...         self._x = None</span>
<span class="sd">    ...         self._y = None</span>
<span class="sd">    ...</span>
<span class="sd">    ...     @ConcreteProperty</span>
<span class="sd">    ...     def x(self):</span>
<span class="sd">    ...         return self._x</span>
<span class="sd">    ...     @x.setter</span>
<span class="sd">    ...     def x(self, value):</span>
<span class="sd">    ...         self._x = value</span>
<span class="sd">    ...     @x.deleter</span>
<span class="sd">    ...     def x(self):</span>
<span class="sd">    ...         self._x = None</span>
<span class="sd">    ...</span>
<span class="sd">    ...     y = ConcreteProperty()</span>

<span class="sd">    After initialising an owner object, you can use its attribute `x`</span>
<span class="sd">    as expected:</span>

<span class="sd">    &gt;&gt;&gt; owner = Owner()</span>
<span class="sd">    &gt;&gt;&gt; owner.x</span>
<span class="sd">    &gt;&gt;&gt; owner.x = 2</span>
<span class="sd">    &gt;&gt;&gt; owner.x</span>
<span class="sd">    2</span>
<span class="sd">    &gt;&gt;&gt; del owner.x</span>
<span class="sd">    &gt;&gt;&gt; owner.x</span>

<span class="sd">    Invoking attribute `y` results in the following error messages:</span>

<span class="sd">    &gt;&gt;&gt; owner.y</span>
<span class="sd">    Traceback (most recent call last):</span>
<span class="sd">    ...</span>
<span class="sd">    AttributeError: Attribute `y` of object `owner` is not gettable.</span>
<span class="sd">    &gt;&gt;&gt; owner.y = 1</span>
<span class="sd">    Traceback (most recent call last):</span>
<span class="sd">    ...</span>
<span class="sd">    AttributeError: Attribute `y` of object `owner` is not settable.</span>
<span class="sd">    &gt;&gt;&gt; del owner.y</span>
<span class="sd">    Traceback (most recent call last):</span>
<span class="sd">    ...</span>
<span class="sd">    AttributeError: Attribute `y` of object `owner` is not deletable.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">fget</span><span class="p">:</span> <span class="n">Callable</span>
    <span class="n">fset</span><span class="p">:</span> <span class="n">Callable</span>
    <span class="n">fdel</span><span class="p">:</span> <span class="n">Callable</span>
    <span class="n">objtype</span><span class="p">:</span> <span class="n">Any</span>
    <span class="n">module</span><span class="p">:</span> <span class="n">types</span><span class="o">.</span><span class="n">ModuleType</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="vm">__doc__</span><span class="p">:</span> <span class="nb">str</span>

    <span class="k">def</span> <span class="nf">__set_name__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">objtype</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">objtype</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="n">objtype</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">module</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getmodule</span><span class="p">(</span><span class="n">objtype</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">module</span><span class="p">,</span> <span class="s1">&#39;__test__&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="s1">&#39;__test__&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">name</span>
        <span class="n">doc</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;__doc__&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">doc</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_doc</span><span class="p">(</span><span class="n">doc</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__get__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">objtype</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">obj</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fget</span> <span class="ow">is</span> <span class="n">fgetdummy</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span>
                <span class="n">f</span><span class="s1">&#39;Attribute `</span><span class="si">{self.name}</span><span class="s1">` of object &#39;</span>
                <span class="n">f</span><span class="s1">&#39;{objecttools.devicephrase(obj)} is not gettable.&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">call_fget</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__set__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fset</span> <span class="ow">is</span> <span class="n">fsetdummy</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span>
                <span class="n">f</span><span class="s1">&#39;Attribute `</span><span class="si">{self.name}</span><span class="s1">` of object &#39;</span>
                <span class="n">f</span><span class="s1">&#39;{objecttools.devicephrase(obj)} is not settable.&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">call_fset</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__delete__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fdel</span> <span class="ow">is</span> <span class="n">fdeldummy</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span>
                <span class="n">f</span><span class="s1">&#39;Attribute `</span><span class="si">{self.name}</span><span class="s1">` of object &#39;</span>
                <span class="n">f</span><span class="s1">&#39;{objecttools.devicephrase(obj)} is not deletable.&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">call_fdel</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>

<div class="viewcode-block" id="BaseProperty.set_doc"><a class="viewcode-back" href="../../../propertytools.html#hydpy.auxs.anntools.BaseProperty.set_doc">[docs]</a>    <span class="k">def</span> <span class="nf">set_doc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">doc</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Assign the given docstring to the property instance and, if</span>
<span class="sd">        possible, to the `__test__` dictionary of the module of its</span>
<span class="sd">        owner class.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">=</span> <span class="n">doc</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;module&#39;</span><span class="p">):</span>
            <span class="n">ref</span> <span class="o">=</span> <span class="n">f</span><span class="s1">&#39;</span><span class="si">{self.objtype.__name__}</span><span class="s1">.</span><span class="si">{self.name}</span><span class="s1">&#39;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="s1">&#39;__test__&#39;</span><span class="p">][</span><span class="n">ref</span><span class="p">]</span> <span class="o">=</span> <span class="n">doc</span></div>

<div class="viewcode-block" id="BaseProperty.call_fget"><a class="viewcode-back" href="../../../propertytools.html#hydpy.auxs.anntools.BaseProperty.call_fget">[docs]</a>    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
    <span class="k">def</span> <span class="nf">call_fget</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Method for implementing special getter functionalities.&quot;&quot;&quot;</span></div>

<div class="viewcode-block" id="BaseProperty.call_fset"><a class="viewcode-back" href="../../../propertytools.html#hydpy.auxs.anntools.BaseProperty.call_fset">[docs]</a>    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
    <span class="k">def</span> <span class="nf">call_fset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Method for implementing special setter functionalities.&quot;&quot;&quot;</span></div>

<div class="viewcode-block" id="BaseProperty.call_fdel"><a class="viewcode-back" href="../../../propertytools.html#hydpy.auxs.anntools.BaseProperty.call_fdel">[docs]</a>    <span class="nd">@abc</span><span class="o">.</span><span class="n">abstractmethod</span>
    <span class="k">def</span> <span class="nf">call_fdel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Method for implementing special deleter functionalities.&quot;&quot;&quot;</span></div>

<div class="viewcode-block" id="BaseProperty.getter"><a class="viewcode-back" href="../../../propertytools.html#hydpy.auxs.anntools.BaseProperty.getter">[docs]</a>    <span class="k">def</span> <span class="nf">getter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fget</span><span class="p">:</span> <span class="n">Callable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;BaseProperty&#39;</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Add the given getter function and its docstring to the</span>
<span class="sd">         property and return it.&quot;&quot;&quot;</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;fget&#39;</span><span class="p">,</span> <span class="n">fget</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_doc</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">fget</span><span class="p">,</span> <span class="s1">&#39;__doc__&#39;</span><span class="p">))</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="BaseProperty.setter"><a class="viewcode-back" href="../../../propertytools.html#hydpy.auxs.anntools.BaseProperty.setter">[docs]</a>    <span class="k">def</span> <span class="nf">setter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fset</span><span class="p">:</span> <span class="n">Callable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;BaseProperty&#39;</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Add the given setter function to the property and return it.&quot;&quot;&quot;</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;fset&#39;</span><span class="p">,</span> <span class="n">fset</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span></div>

<div class="viewcode-block" id="BaseProperty.deleter"><a class="viewcode-back" href="../../../propertytools.html#hydpy.auxs.anntools.BaseProperty.deleter">[docs]</a>    <span class="k">def</span> <span class="nf">deleter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fdel</span><span class="p">:</span> <span class="n">Callable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s1">&#39;BaseProperty&#39;</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Add the given deleter function to the property and return it.&quot;&quot;&quot;</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;fdel&#39;</span><span class="p">,</span> <span class="n">fdel</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span></div></div>


<div class="viewcode-block" id="ProtectedProperty"><a class="viewcode-back" href="../../../propertytools.html#hydpy.auxs.anntools.ProtectedProperty">[docs]</a><span class="k">class</span> <span class="nc">ProtectedProperty</span><span class="p">(</span><span class="n">BaseProperty</span><span class="p">):</span>
    <span class="c1"># noinspection PyUnresolvedReferences</span>
    <span class="sd">&quot;&quot;&quot;|property| like class which prevents getting an attribute</span>
<span class="sd">    before setting it.</span>

<span class="sd">    Under some circumstances, an attribute value needs to be prepared</span>
<span class="sd">    before one should be allowed to query it.  Consider the case where</span>
<span class="sd">    a property of a Python class (beeing part of the API) links to an</span>
<span class="sd">    attribute of a Cython extension class (not part of the API).  If</span>
<span class="sd">    the Cython attribute is e.g. some type of vector requiring memory</span>
<span class="sd">    allocation, trying to query this vector befor it has actually been</span>
<span class="sd">    prepared results in a programm crash.  Using |ProtectedProperty|</span>
<span class="sd">    is a means to prevent from such problems to occur.</span>

<span class="sd">    Consider the following class `Test`, which defines most simple</span>
<span class="sd">    `set`, `get`, and `del` methods for its only property `x`:</span>

<span class="sd">    &gt;&gt;&gt; from hydpy.core.propertytools import ProtectedProperty</span>
<span class="sd">    &gt;&gt;&gt; class Test:</span>
<span class="sd">    ...</span>
<span class="sd">    ...     def __init__(self):</span>
<span class="sd">    ...         self._x = None</span>
<span class="sd">    ...</span>
<span class="sd">    ...     @ProtectedProperty</span>
<span class="sd">    ...     def x(self):</span>
<span class="sd">    ...         &quot;Test&quot;</span>
<span class="sd">    ...         return self._x</span>
<span class="sd">    ...     @x.setter</span>
<span class="sd">    ...     def x(self, value):</span>
<span class="sd">    ...         self._x = value</span>
<span class="sd">    ...     @x.deleter</span>
<span class="sd">    ...     def x(self):</span>
<span class="sd">    ...         self._x = None</span>

<span class="sd">    Due to using |ProtectedProperty| instead of |property|, trying</span>
<span class="sd">    to query `x` after initializing a `Test` object results in an</span>
<span class="sd">    |AttributeNotReady| error:</span>

<span class="sd">    &gt;&gt;&gt; test = Test()</span>
<span class="sd">    &gt;&gt;&gt; test.x</span>
<span class="sd">    Traceback (most recent call last):</span>
<span class="sd">    ...</span>
<span class="sd">    hydpy.core.exceptiontools.AttributeNotReady: Attribute `x` of object \</span>
<span class="sd">`test` has not been prepared so far.</span>

<span class="sd">    After setting a value for property `x`, this value can be queried</span>
<span class="sd">    as expected:</span>

<span class="sd">    &gt;&gt;&gt; test.x = 1</span>
<span class="sd">    &gt;&gt;&gt; test.x</span>
<span class="sd">    1</span>

<span class="sd">    After deleting `x`, its value is not accessible, again:</span>

<span class="sd">    &gt;&gt;&gt; del test.x</span>
<span class="sd">    &gt;&gt;&gt; test.x</span>
<span class="sd">    Traceback (most recent call last):</span>
<span class="sd">    ...</span>
<span class="sd">    hydpy.core.exceptiontools.AttributeNotReady: Attribute `x` of object \</span>
<span class="sd">`test` has not been prepared so far.</span>

<span class="sd">    If the considered object defines a name (different from the class</span>
<span class="sd">    name in lower letters) and/or references a |Node| or |Element|</span>
<span class="sd">    object (directly or indirectly), the exception message includes this</span>
<span class="sd">    additional information:</span>

<span class="sd">    &gt;&gt;&gt; from hydpy import Element</span>
<span class="sd">    &gt;&gt;&gt; test.name = &#39;name_object&#39;</span>
<span class="sd">    &gt;&gt;&gt; test.element = Element(&#39;name_element&#39;)</span>

<span class="sd">    &gt;&gt;&gt; test.x</span>
<span class="sd">    Traceback (most recent call last):</span>
<span class="sd">    ...</span>
<span class="sd">    hydpy.core.exceptiontools.AttributeNotReady: Attribute `x` of object \</span>
<span class="sd">`name_object` of element `name_element` has not been prepared so far.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fget</span><span class="o">=</span><span class="n">fsetdummy</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fget</span> <span class="o">=</span> <span class="n">fget</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_doc</span><span class="p">(</span><span class="n">fget</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fset</span> <span class="o">=</span> <span class="n">fsetdummy</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fdel</span> <span class="o">=</span> <span class="n">fdeldummy</span>

<div class="viewcode-block" id="ProtectedProperty.call_fget"><a class="viewcode-back" href="../../../propertytools.html#hydpy.auxs.anntools.ProtectedProperty.call_fget">[docs]</a>    <span class="k">def</span> <span class="nf">call_fget</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Call `fget` when ready, otherwise raise an exception.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">isready</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">fget</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">exceptiontools</span><span class="o">.</span><span class="n">AttributeNotReady</span><span class="p">(</span>
            <span class="n">f</span><span class="s1">&#39;Attribute `</span><span class="si">{self.name}</span><span class="s1">` of object &#39;</span>
            <span class="n">f</span><span class="s1">&#39;{objecttools.devicephrase(obj)} has not been prepared so far.&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="ProtectedProperty.call_fset"><a class="viewcode-back" href="../../../propertytools.html#hydpy.auxs.anntools.ProtectedProperty.call_fset">[docs]</a>    <span class="k">def</span> <span class="nf">call_fset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Call `fset` and mark the attribute as ready.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fset</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="nb">vars</span><span class="p">(</span><span class="n">obj</span><span class="p">)[</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="ProtectedProperty.call_fdel"><a class="viewcode-back" href="../../../propertytools.html#hydpy.auxs.anntools.ProtectedProperty.call_fdel">[docs]</a>    <span class="k">def</span> <span class="nf">call_fdel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Call `fdel` and mark the attribute as not ready.&quot;&quot;&quot;</span>
        <span class="nb">vars</span><span class="p">(</span><span class="n">obj</span><span class="p">)[</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fdel</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span></div>

<div class="viewcode-block" id="ProtectedProperty.isready"><a class="viewcode-back" href="../../../propertytools.html#hydpy.auxs.anntools.ProtectedProperty.isready">[docs]</a>    <span class="k">def</span> <span class="nf">isready</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Return |True| or |False| to indicate if the protected</span>
<span class="sd">        property is ready for the given object.  If the object is</span>
<span class="sd">        unknow, |ProtectedProperty| returns |False|.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">vars</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="ProtectedProperties"><a class="viewcode-back" href="../../../propertytools.html#hydpy.auxs.anntools.ProtectedProperties">[docs]</a><span class="k">class</span> <span class="nc">ProtectedProperties</span><span class="p">:</span>
    <span class="c1"># noinspection PyUnresolvedReferences</span>
    <span class="sd">&quot;&quot;&quot;Iterable for |ProtectedProperty| objects.</span>

<span class="sd">    You can combine an arbitrary number of |ProtectedProperty| objects</span>
<span class="sd">    with a |ProtectedProperties| objects.  Its |ProtectedProperties.allready|</span>
<span class="sd">    allows to check if the status of all properties at ones:</span>

<span class="sd">    &gt;&gt;&gt; from hydpy.core import propertytools as pt</span>
<span class="sd">    &gt;&gt;&gt; class Test:</span>
<span class="sd">    ...</span>
<span class="sd">    ...     @pt.ProtectedProperty</span>
<span class="sd">    ...     def x(self):</span>
<span class="sd">    ...         return &#39;this is x&#39;</span>
<span class="sd">    ...     @x.setter</span>
<span class="sd">    ...     def x(self, value):</span>
<span class="sd">    ...         pass</span>
<span class="sd">    ...</span>
<span class="sd">    ...     @pt.ProtectedProperty</span>
<span class="sd">    ...     def z(self):</span>
<span class="sd">    ...         return &#39;this is z&#39;</span>
<span class="sd">    ...     @z.setter</span>
<span class="sd">    ...     def z(self, value):</span>
<span class="sd">    ...         pass</span>
<span class="sd">    ...</span>
<span class="sd">    ...     protectedproperties = pt.ProtectedProperties(x, z)</span>

<span class="sd">    &gt;&gt;&gt; test1 = Test()</span>
<span class="sd">    &gt;&gt;&gt; test1.x = None</span>
<span class="sd">    &gt;&gt;&gt; test2 = Test()</span>
<span class="sd">    &gt;&gt;&gt; test2.x = None</span>
<span class="sd">    &gt;&gt;&gt; test2.z = None</span>
<span class="sd">    &gt;&gt;&gt; Test.protectedproperties.allready(test1)</span>
<span class="sd">    False</span>
<span class="sd">    &gt;&gt;&gt; Test.protectedproperties.allready(test2)</span>
<span class="sd">    True</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">properties</span><span class="p">:</span> <span class="n">ProtectedProperty</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__properties</span> <span class="o">=</span> <span class="n">properties</span>

<div class="viewcode-block" id="ProtectedProperties.allready"><a class="viewcode-back" href="../../../propertytools.html#hydpy.auxs.anntools.ProtectedProperties.allready">[docs]</a>    <span class="k">def</span> <span class="nf">allready</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Return |True| or |False| to indicate whether all protected</span>
<span class="sd">        properties are ready or not.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">prop</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__properties</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">prop</span><span class="o">.</span><span class="n">isready</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
                <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="kc">True</span></div>

    <span class="k">def</span> <span class="nf">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__properties</span><span class="o">.</span><span class="fm">__iter__</span><span class="p">()</span></div>


<div class="viewcode-block" id="DependentProperty"><a class="viewcode-back" href="../../../propertytools.html#hydpy.auxs.anntools.DependentProperty">[docs]</a><span class="k">class</span> <span class="nc">DependentProperty</span><span class="p">(</span><span class="n">BaseProperty</span><span class="p">):</span>
    <span class="c1"># noinspection PyUnresolvedReferences</span>
    <span class="sd">&quot;&quot;&quot;|property| like class which prevents accessing a dependent</span>
<span class="sd">    attribute before other attributes have been prepared.</span>

<span class="sd">    The following explanations suppose first reading the documentation</span>
<span class="sd">    on function |ProtectedProperty|.  The following example builds on</span>
<span class="sd">    the one on class |ProtectedProperty|, but adds the dependent property,</span>
<span class="sd">    which requires the protected property `x` to be properly prepared:</span>

<span class="sd">    &gt;&gt;&gt; from hydpy.core import propertytools as pt</span>
<span class="sd">    &gt;&gt;&gt; class Test:</span>
<span class="sd">    ...</span>
<span class="sd">    ...     def __init__(self):</span>
<span class="sd">    ...         self._x = None</span>
<span class="sd">    ...         self._y = None</span>
<span class="sd">    ...</span>
<span class="sd">    ...     @pt.ProtectedProperty</span>
<span class="sd">    ...     def x(self):</span>
<span class="sd">    ...         return self._x</span>
<span class="sd">    ...     @x.setter</span>
<span class="sd">    ...     def x(self, value):</span>
<span class="sd">    ...         self._x = value</span>
<span class="sd">    ...     @x.deleter</span>
<span class="sd">    ...     def x(self):</span>
<span class="sd">    ...         self._x = None</span>
<span class="sd">    ...</span>
<span class="sd">    ...     y = pt.DependentProperty(protected=(x,))</span>
<span class="sd">    ...</span>
<span class="sd">    ...     @y.getter</span>
<span class="sd">    ...     def y(self):</span>
<span class="sd">    ...         return self._y</span>
<span class="sd">    ...     @y.setter</span>
<span class="sd">    ...     def y(self, value):</span>
<span class="sd">    ...         self._y = value</span>
<span class="sd">    ...     @y.deleter</span>
<span class="sd">    ...     def y(self):</span>
<span class="sd">    ...         self._y = None</span>

<span class="sd">    Initially, due to `x` beeing not prepared, there is no way to get,</span>
<span class="sd">    set, or delete attribute `y`:</span>

<span class="sd">    &gt;&gt;&gt; test = Test()</span>
<span class="sd">    &gt;&gt;&gt; test.y</span>
<span class="sd">    Traceback (most recent call last):</span>
<span class="sd">    ...</span>
<span class="sd">    hydpy.core.exceptiontools.AttributeNotReady: Attribute `y` of \</span>
<span class="sd">object `test` is not usable so far.  At least, you have to prepare \</span>
<span class="sd">attribute `x` first.</span>
<span class="sd">    &gt;&gt;&gt; test.y = 1</span>
<span class="sd">    Traceback (most recent call last):</span>
<span class="sd">    ...</span>
<span class="sd">    hydpy.core.exceptiontools.AttributeNotReady: Attribute `y` of \</span>
<span class="sd">object `test` is not usable so far.  At least, you have to prepare \</span>
<span class="sd">attribute `x` first.</span>
<span class="sd">    &gt;&gt;&gt; del test.y</span>
<span class="sd">    Traceback (most recent call last):</span>
<span class="sd">    ...</span>
<span class="sd">    hydpy.core.exceptiontools.AttributeNotReady: Attribute `y` of \</span>
<span class="sd">object `test` is not usable so far.  At least, you have to prepare \</span>
<span class="sd">attribute `x` first.</span>

<span class="sd">    However, after assigning a value to `x`, `y` behaves like a</span>
<span class="sd">    &quot;normal&quot; property:</span>

<span class="sd">    &gt;&gt;&gt; test.x = &#39;anything&#39;</span>
<span class="sd">    &gt;&gt;&gt; test.y = 1</span>
<span class="sd">    &gt;&gt;&gt; test.y</span>
<span class="sd">    1</span>
<span class="sd">    &gt;&gt;&gt; del test.y</span>
<span class="sd">    &gt;&gt;&gt; test.y</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">protected</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">protected</span> <span class="o">=</span> <span class="n">protected</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fget</span> <span class="o">=</span> <span class="n">fgetdummy</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fset</span> <span class="o">=</span> <span class="n">fsetdummy</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fdel</span> <span class="o">=</span> <span class="n">fdeldummy</span>

    <span class="k">def</span> <span class="nf">__check</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">req</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">protected</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">req</span><span class="o">.</span><span class="n">isready</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
                <span class="k">raise</span> <span class="n">exceptiontools</span><span class="o">.</span><span class="n">AttributeNotReady</span><span class="p">(</span>
                    <span class="n">f</span><span class="s1">&#39;Attribute `</span><span class="si">{self.name}</span><span class="s1">` of object &#39;</span>
                    <span class="n">f</span><span class="s1">&#39;{objecttools.devicephrase(obj)} is not usable &#39;</span>
                    <span class="n">f</span><span class="s1">&#39;so far.  At least, you have to prepare attribute &#39;</span>
                    <span class="n">f</span><span class="s1">&#39;`</span><span class="si">{req.name}</span><span class="s1">` first.&#39;</span><span class="p">)</span>

<div class="viewcode-block" id="DependentProperty.call_fget"><a class="viewcode-back" href="../../../propertytools.html#hydpy.auxs.anntools.DependentProperty.call_fget">[docs]</a>    <span class="k">def</span> <span class="nf">call_fget</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__check</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">fget</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span></div>

<div class="viewcode-block" id="DependentProperty.call_fset"><a class="viewcode-back" href="../../../propertytools.html#hydpy.auxs.anntools.DependentProperty.call_fset">[docs]</a>    <span class="k">def</span> <span class="nf">call_fset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__check</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fset</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></div>

<div class="viewcode-block" id="DependentProperty.call_fdel"><a class="viewcode-back" href="../../../propertytools.html#hydpy.auxs.anntools.DependentProperty.call_fdel">[docs]</a>    <span class="k">def</span> <span class="nf">call_fdel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__check</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fdel</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="DefaultProperty"><a class="viewcode-back" href="../../../propertytools.html#hydpy.auxs.anntools.DefaultProperty">[docs]</a><span class="k">class</span> <span class="nc">DefaultProperty</span><span class="p">(</span><span class="n">BaseProperty</span><span class="p">):</span>
    <span class="c1"># noinspection PyUnresolvedReferences</span>
    <span class="sd">&quot;&quot;&quot;|property| like class which uses the getter function to return</span>
<span class="sd">    a default value unless a custom value is available.</span>

<span class="sd">    The following example includes two default properties.  Default</span>
<span class="sd">    property `x` implements only the required default getter</span>
<span class="sd">    function, default property `y` additionally implements a setter</span>
<span class="sd">    and a delete function with value checks:</span>

<span class="sd">    &gt;&gt;&gt; from hydpy.core.propertytools import DefaultProperty</span>
<span class="sd">    &gt;&gt;&gt; class Test:</span>
<span class="sd">    ...</span>
<span class="sd">    ...     @DefaultProperty</span>
<span class="sd">    ...     def x(self):</span>
<span class="sd">    ...         &quot;Default property x.&quot;</span>
<span class="sd">    ...         return 1</span>
<span class="sd">    ...</span>
<span class="sd">    ...     @DefaultProperty</span>
<span class="sd">    ...     def y(self):</span>
<span class="sd">    ...         &quot;Default property y.&quot;</span>
<span class="sd">    ...         return 2.0</span>
<span class="sd">    ...     @y.setter</span>
<span class="sd">    ...     def y(self, value):</span>
<span class="sd">    ...         return float(value)</span>
<span class="sd">    ...     @y.deleter</span>
<span class="sd">    ...     def y(self):</span>
<span class="sd">    ...         if self.y == 4.0:</span>
<span class="sd">    ...             raise RuntimeError</span>

<span class="sd">    Initially, both properties return the default values defined by</span>
<span class="sd">    their getter functions:</span>

<span class="sd">    &gt;&gt;&gt; test = Test()</span>
<span class="sd">    &gt;&gt;&gt; test.x</span>
<span class="sd">    1</span>
<span class="sd">    &gt;&gt;&gt; test.y</span>
<span class="sd">    2.0</span>

<span class="sd">    After setting custom values successfully, default properties return them:</span>

<span class="sd">    &gt;&gt;&gt; test.x = 3</span>
<span class="sd">    &gt;&gt;&gt; test.y = &#39;five&#39;</span>
<span class="sd">    Traceback (most recent call last):</span>
<span class="sd">    ...</span>
<span class="sd">    ValueError: could not convert string to float: &#39;five&#39;</span>
<span class="sd">    &gt;&gt;&gt; test.x</span>
<span class="sd">    3</span>
<span class="sd">    &gt;&gt;&gt; test.y</span>
<span class="sd">    2.0</span>
<span class="sd">    &gt;&gt;&gt; test.y = &#39;4&#39;</span>
<span class="sd">    &gt;&gt;&gt; test.y</span>
<span class="sd">    4.0</span>

<span class="sd">    After deleting these custom values successfully, the getter functions</span>
<span class="sd">    are again used to return default values:</span>

<span class="sd">    &gt;&gt;&gt; del test.x</span>
<span class="sd">    &gt;&gt;&gt; del test.y</span>
<span class="sd">    Traceback (most recent call last):</span>
<span class="sd">    ...</span>
<span class="sd">    RuntimeError</span>
<span class="sd">    &gt;&gt;&gt; test.x</span>
<span class="sd">    1</span>
<span class="sd">    &gt;&gt;&gt; test.y</span>
<span class="sd">    4.0</span>
<span class="sd">    &gt;&gt;&gt; test.y = 5.0</span>
<span class="sd">    &gt;&gt;&gt; del test.y</span>
<span class="sd">    &gt;&gt;&gt; test.y</span>
<span class="sd">    2.0</span>

<span class="sd">    Trying to delete a not existing custom value does not harm:</span>

<span class="sd">    &gt;&gt;&gt; del test.x</span>
<span class="sd">    &gt;&gt;&gt; del test.y</span>

<span class="sd">    The documentation strings of the getter functions serve as documentation</span>
<span class="sd">    strings of the respective default properties:</span>

<span class="sd">    &gt;&gt;&gt; Test.x.__doc__</span>
<span class="sd">    &#39;Default property x.&#39;</span>
<span class="sd">    &gt;&gt;&gt; Test.y.__doc__</span>
<span class="sd">    &#39;Default property y.&#39;</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fget</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fget</span> <span class="o">=</span> <span class="n">fget</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fset</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fdel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fdel</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_doc</span><span class="p">(</span><span class="n">fget</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">)</span>

<div class="viewcode-block" id="DefaultProperty.call_fget"><a class="viewcode-back" href="../../../propertytools.html#hydpy.auxs.anntools.DefaultProperty.call_fget">[docs]</a>    <span class="k">def</span> <span class="nf">call_fget</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Return the predefined custom value when available, otherwise,</span>
<span class="sd">        the value defined by the getter function.&quot;&quot;&quot;</span>
        <span class="n">custom</span> <span class="o">=</span> <span class="nb">vars</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">custom</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">fget</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">custom</span></div>

<div class="viewcode-block" id="DefaultProperty.call_fset"><a class="viewcode-back" href="../../../propertytools.html#hydpy.auxs.anntools.DefaultProperty.call_fset">[docs]</a>    <span class="k">def</span> <span class="nf">call_fset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Store the given custom value and call the setter function.&quot;&quot;&quot;</span>
        <span class="nb">vars</span><span class="p">(</span><span class="n">obj</span><span class="p">)[</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fset</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></div>

<div class="viewcode-block" id="DefaultProperty.call_fdel"><a class="viewcode-back" href="../../../propertytools.html#hydpy.auxs.anntools.DefaultProperty.call_fdel">[docs]</a>    <span class="k">def</span> <span class="nf">call_fdel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Remove the predefined custom value and call the delete function.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fdel</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">del</span> <span class="nb">vars</span><span class="p">(</span><span class="n">obj</span><span class="p">)[</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">pass</span></div>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_fset</span><span class="p">(</span><span class="n">_</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Just return the given value.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">_fdel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Do nothing.&quot;&quot;&quot;</span></div>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../../index.html">
              <img class="logo" src="../../../_static/HydPy_Logo.png" alt="Logo"/>
            </a></p>
  <h3><a href="../../../index.html">Table of Contents</a></h3>
  <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../install.html">Installation Instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../quickstart.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../framework.html">Framework Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../modelcollection.html">Model Collection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../development.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../examples.html">Example Projects</a></li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">HydPy 4.0a11 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" >Module code</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2019, HydPy Developers.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.2.1.
    </div>
  </body>
</html>